<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>RIN Test Player</title>
    <!-- local styles -->
    <style type="text/css">
        html, body, #rinPlayer2
        {
            width: 600px;
            height: 333px;
            margin: 0;
            padding: 0;
        }
        textarea
        {
            max-height:80px;
        }
    </style>
    <!-- styles for default controller -->
    <!--<link rel="stylesheet" type="text/css" href="../web/systemResources/themeResources/playerControls/Controller.part.css" />
    <link rel="stylesheet" type="text/css" href="../systemResources/themeResources/interactionControls/PanZoomControls.part.css" />
    <link rel="stylesheet" type="text/css" href="../systemResources/themeResources/contentbrowser/OneD.part.css" />
    <link rel="stylesheet" type="text/css" href="../systemResources/themeResources/interactionControls/RotateControl.part.css" />
    <link rel="stylesheet" type="text/css" href="../systemResources/themeResources/popup/popup.part.css" />
    <link rel="stylesheet" type="text/css" href="../systemResources/themeResources/overlays/TextOverlays.part.css" />
    <link rel="stylesheet" type="text/css" href="../systemResources/themeResources/overlays/TitleOverlays.part.css" />
    <link rel="stylesheet" type="text/css" href="../systemResources/themeResources/overlays/MediaOverlays.part.css" />-->
    <!-- third-party libraries -->
    <script src="../../lib/jquery-1.7.2-dev.js" type="text/javascript"></script>
    <script src="../../../seadragon/seadragon-min.js" type="text/javascript"></script>
    <script src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0" type="text/javascript"
        charset="UTF-8"></script>
    <script type="text/javascript" src="../../lib/knockout-2.1.0.debug.js"></script>
    <script type="text/javascript" src="../../lib/pano-viewer.js"></script>
    <script src="../web/lib/jquery.easing.1.3.js" type="text/javascript"></script>
    <!-- TODO: find better places for these files -->
    <script src="../../../src/utilities/XmlHelper.js" type="text/javascript"></script>
    <script src="../../../src/utilities/Gestures.js" type="text/javascript"></script>
    <script src="../../../src/utilities/JSONLoader.js" type="text/javascript"></script>
    <script src="../../../src/utilities/ESData.js" type="text/javascript"></script>
    <script src="../../../src/utilities/SelfTest.js" type="text/javascript"></script>
    
    <!-- interpolation -->
    <script src="../../../src/storyboard/BasicInterpolators.js" type="text/javascript"></script>
    <script src="../../../src/storyboard/trajectory.js" type="text/javascript"></script>
    <script src="../../../src/storyboard/nonLinearStoryboard.js" type="text/javascript"></script>
    
    <!-- contracts -->
    <script src="../../../src/contracts/IOrchestrator.js" type="text/javascript"></script>
    <script src="../../../src/contracts/IExperienceStream.js" type="text/javascript"></script>
    <script src="../../../src/contracts/DiscreteKeyframeESBase.js" type="text/javascript"></script>
    <script src="../../../src/contracts/InterpolatedKeyframeESBase.js" type="text/javascript"></script>
    <!-- core functionality -->
    <script src="../../../src/Core/Common.js" type="text/javascript"></script>
    <script src="../../../src/Core/ESItem.js" type="text/javascript"></script>
    <script src="../../../src/Core/ESItemsManager.js" type="text/javascript"></script>
    <script src="../../../src/Core/ESTimer.js" type="text/javascript"></script>
    <script src="../../../src/Core/EventLogger.js" type="text/javascript"></script>
    <script src="../../../src/Core/Orchestrator.js" type="text/javascript"></script>
    <script src="../../../src/core/OrchestratorProxy.js" type="text/javascript"></script>
    <script src="../../../src/Core/Player.js" type="text/javascript"></script>
    <script src="../../../src/Core/PlayerConfiguration.js" type="text/javascript"></script>
    <script src="../../../src/Core/PlayerControl.js" type="text/javascript"></script>
    <script src="../../../src/Core/ResourcesResolver.js" type="text/javascript"></script>
    <script src="../../../src/Core/RinDataProxy.js" type="text/javascript"></script>
    <script src="../../../src/Core/ScreenPlayInterpreter.js" type="text/javascript"></script>
    <script src="../../../src/Core/StageAreaManager.js" type="text/javascript"></script>
    <script src="../../../src/Core/TaskTimer.js" type="text/javascript"></script>
    <script src="../../../src/Core/TransitionService.js" type="text/javascript"></script>
    <!-- test controller -->
    <script src="../../../src/player/DefaultController.js" type="text/javascript"></script>
    <script src="../../../src/player/ControllerViewModel.js" type="text/javascript"></script>
    <!-- experiences -->
    <script src="../../../src/experiences/BufferingES.js" type="text/javascript"></script>
    <script src="../../../src/experiences/PreloaderES.js" type="text/javascript"></script>
    <script src="../../../src/experiences/DeepZoomES.js" type="text/javascript"></script>
    <script src="../../../src/experiences/ESTimerES.js" type="text/javascript"></script>
    <script src="../../../src/experiences/MapES.js" type="text/javascript"></script>
    <script src="../../../src/experiences/AudioES.js" type="text/javascript"></script>
    <script src="../../../src/experiences/VideoES.js" type="text/javascript"></script>
    <script src="../../../src/experiences/PanoramicES.js" type="text/javascript"></script>
    <script src="../../../src/experiences/PhotosynthES.js" type="text/javascript"></script>
    <script src="../../../src/experiences/PlaceholderES.js" type="text/javascript"></script>
    <script src="../../../src/experiences/PlayerControllerES.js" type="text/javascript"></script>
    <script src="../../../src/experiences/ContentBrowserES.js" type="text/javascript"></script>
    <script src="../../../src/experiences/OverlayES.js" type="text/javascript"></script>
    <script type="text/javascript" src="../../../src/experiences/WebViewES.js"></script>
    <script type="text/javascript" src="../../../src/experiences/RinES.js"></script>
    <script src="../../../src/experiences/InkES.js"></script>
    <script src="../../../src/controls/PopupControl.js" type="text/javascript"></script>
    <script src="../../../src/behaviors/PopupBehavior.js"></script>
    <!-- embeded attifacts -->
    <script type="text/javascript" src="../../../src/embededArtifacts/InteractionBehaviorService.js"></script>
    <script type="text/javascript" src="../../../src/embededArtifacts/basicBehaviors.js"></script>
    <script type="text/javascript" src="../../../src/embededArtifacts/artifactHost.js"></script>
    <script type="text/javascript" src="../../../src/embededArtifacts/basicArtifacts.js"></script>
    <!-- interaction controls -->
    <script type="text/javascript" src="../../../src/InteractionControls/CoreInteractionControlFactories.js"></script>
    
    <!-- player creation -->
    <script type="text/javascript">
        $(document).ready(function () {
            rin.bindPlayerControls(null, "../..");
            var narrativeId = document.location.search || "/rin/web/narratives/video/narrative.js";
            if (narrativeId && narrativeId.length > 0 && narrativeId[0] == "?") {
                narrativeId = narrativeId.substr(1);
            }

            var rinPlayer2 = rin.getPlayerControl(document.getElementById("rinPlayer2"));
            rinPlayer2.load(narrativeId, function (isInDeepState) {
                if (!isInDeepState) rinPlayer2.play();
            });

            $("#urlCapture").click(function () { var ds = rinPlayer2.getDeepStateUrl(); $("#captureText").val(ds); });
            $(".goToUrl").click(function (e) {
                rinPlayer2.load($(".capturedUrl", $(e.srcElement).parent().parent()).val(), function (isInDeepState) {
                    if (!isInDeepState)
                        rinPlayer2.play();
                });
            });
        });
    </script>
</head>
<body>
    
    <div>
        <h3>Capture Url</h3>
        <table>
            <tr>
                <td><textarea rows="1" cols="80" id="captureText" class="capturedUrl" style="height:200px;clear:both;width:600px;" ></textarea></td>
                <td><input type="button" id="urlCapture" value="Capture URL" /></td>
                <td><input type="button" class="goToUrl" value="Load URL" /></td>
            </tr>
        </table>

        <div id="rinPlayer2" class="rinPlayer" data-options="autoplay=false&controls=true/"></div>

        <h3>Validate Urls</h3>
        <table>
            <tr>
                <td><textarea rows="1" cols="80" class="capturedUrl" style="height:200px;clear:both;width:600px;" >/rin/web/narratives/video/narrative.js?begin=71.59&action=pause&screenPlayId=SCP1&state=%7B%22experiences%22%3A%7B%22itemReferences%22%3A%7B%22ZoomableMediaExperienceStream-2%22%3A%7B%22state%22%3A%7B%22viewport%22%3A%7B%22region%22%3A%7B%22center%22%3A%7B%22x%22%3A0.5533000964892208%2C%22y%22%3A0.2605699154398622%7D%2C%22span%22%3A%7B%22x%22%3A0.02460783300575921%2C%22y%22%3A0.013657347318196361%7D%7D%7D%7D%7D%7D%7D%7D</textarea></td>
                <td>Front of the red van. Paused.</td>
                <td><input type="button" class="goToUrl" value="Load URL" /></td>
            </tr>
            <tr>
                <td><textarea rows="1" cols="80" class="capturedUrl" style="height:200px;clear:both;width:600px;" >/rin/web/narratives/video/narrative.js?begin=46.69&action=play&screenPlayId=SCP1&state=%7B%22experiences%22%3A%7B%22itemReferences%22%3A%7B%7D%7D%7D</textarea></td>
                <td>Should start showing the car wind shield in the the video. Playing.</td>
                <td><input type="button" class="goToUrl" value="Load URL" /></td>
            </tr>
            <tr>
                <td><textarea rows="1" cols="80" class="capturedUrl" style="height:200px;clear:both;width:600px;" >/rin/web/narratives/video/narrative.js?begin=35.79&action=pause&screenPlayId=SCP1&state=%7B%22experiences%22%3A%7B%22itemReferences%22%3A%7B%7D%7D%7D</textarea></td>
                <td>Should start with a map. Paused.</td>
                <td><input type="button" class="goToUrl" value="Load URL" /></td>
            </tr>
            <tr>
                <td><textarea rows="1" cols="80" class="capturedUrl" style="height:200px;clear:both;width:600px;" >/rin/web/narratives/video/narrative.js?begin=199.27&action=pause&screenPlayId=SCP1&state=%7B%22experiences%22%3A%7B%22itemReferences%22%3A%7B%22ZoomableMediaExperienceStream-3%22%3A%7B%22state%22%3A%7B%22viewport%22%3A%7B%22region%22%3A%7B%22center%22%3A%7B%22x%22%3A0.32170672086369967%2C%22y%22%3A0.16071466468263834%7D%2C%22span%22%3A%7B%22x%22%3A0.10002502241705763%2C%22y%22%3A0.055513887441466986%7D%7D%7D%7D%7D%7D%7D%7D</textarea></td>
                <td>Should show number 20 in focus in the grounds. Paused.</td>
                <td><input type="button" class="goToUrl" value="Load URL" /></td>
            </tr>
        </table>
    </div>
    
</body>
</html>
