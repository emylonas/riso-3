/*! PxTouch | http://github.com/thinkpixellab/pxtouch | 2013-03-28 */
"undefined"==typeof PxTouch&&(PxTouch={}),function(t){PxTouch.registerSpecialEvents=function(e,i,s){t.each(i,function(i,n){t.event.special[n]={setup:function(){var i=t(this),n=i.data(e);n||(n=new s(i),n.activeEventTypes=0,n.start(),i.data(e,n)),n.activeEventTypes++},teardown:function(){var i=t(this).data(e);i&&(i.activeEventTypes--,0===i.activeEventTypes&&i.stop())}}})}}(PxTouch.jQuery||jQuery),function(t){function e(t){this.$el=t,this.activePointers=[],this.mouseEventsEnabled=!1;var e=function(t,e){return function(i){var s,n,r=h(i);for(s=0,n=r.length;n>s;s++)t.call(e,r[s],i)}};this.listeners={msPointer:{MSPointerDown:e(s,this),MSPointerMove:e(n,this),MSPointerUp:e(o,this),MSPointerCancel:e(r,this)},touch:{touchstart:e(i,this),touchmove:e(n,this),touchend:e(o,this),touchcancel:e(r,this)},mouse:{mousedown:e(s,this),mousemove:e(n,this),mouseup:e(o,this)}},this.docListeners={msPointer:{MSPointerUp:e(o,this)},mouse:{mouseup:e(o,this)}}}function i(e,i){return this.mouseEventsEnabled&&(this.$el.off(this.listeners.mouse),t(document).off(this.docListeners.mouse),this.mouseEventsEnabled=!1),s.call(this,e,i)}function s(t,e){this.activePointers.push(t),this.triggerEvent("pointerstart",t,e)}function n(t,e){var i=t.indexIn(this.activePointers);i>=0&&(this.activePointers.splice(i,1,t),this.triggerEvent("pointermove",t,e))}function r(t,e){return o.call(this,t,e,!0)}function o(t,e,i){var s=t.indexIn(this.activePointers);s>=0&&(this.activePointers.splice(s,1),this.triggerEvent("pointerend",t,e,i))}function h(t){t.preventManipulation&&t.preventManipulation();var e,i,s,n,r,o,h=[],l=a(t),u=t.originalEvent,g=u.changedTouches||u.targetTouches||u.touches||[u];for(e=0,i=g.length;i>e;e++){if(s=g[e],n=r=0,s.pageX||s.pageY)n=s.pageX,r=s.pageY;else if(s.clientX||s.clientY){var p=document.documentElement;n=s.clientX+document.body.scrollLeft+p.scrollLeft,r=s.clientY+document.body.scrollTop+p.scrollTop}o=s.pointerId||s.identifier||e,h.push(new c(n,r,o,l))}return h}function a(t){if(0===t.type.indexOf("touch"))return l.TOUCH;if(0===t.type.indexOf("mouse"))return l.MOUSE;var e=t.originalEvent;switch(e.pointerType){case e.MSPOINTER_TYPE_MOUSE:return l.MOUSE;case e.MSPOINTER_TYPE_TOUCH:return l.TOUCH;case e.MSPOINTER_TYPE_PEN:return l.PEN}return l.MOUSE}function c(t,e,i,s){this.x=t,this.y=e,this.id=i,this.type=s}e.prototype.start=function(){window.navigator.msPointerEnabled?(this.$el.on(this.listeners.msPointer),t(document).on(this.docListeners.msPointer)):("ontouchstart"in window&&this.$el.on(this.listeners.touch),this.$el.on(this.listeners.mouse),t(document).on(this.docListeners.mouse),this.mouseEventsEnabled=!0)},e.prototype.stop=function(){this.$el.off(this.listeners.msPointer).off(this.listeners.touch).off(this.listeners.mouse),t(document).off(this.docListeners.msPointer).off(this.docListeners.mouse),this.mouseEventsEnabled=!1,this.activePointers=[]},e.prototype.triggerEvent=function(e,i,s,n){this.$el.trigger(new t.Event(e,{pointer:i,cancelled:n===!0,activePointers:this.activePointers,originalEvent:s}))};var l={MOUSE:"mouse",TOUCH:"touch",PEN:"pen"};c.prototype.getDistance=function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},c.prototype.indexIn=function(t){for(var e=0,i=t.length;i>e;e++)if(t[e].id===this.id)return e;return-1},PxTouch.registerSpecialEvents("pxtouch.pointers",["pointerstart","pointermove","pointerend"],e)}(PxTouch.jQuery||jQuery),function(t){function e(e){this.$el=e,this.paths=[];var s=t.proxy(i,this);this.listeners={pointerstart:s,pointermove:s,pointerend:s}}function i(e){var i,n,r,o,h,a=e.pointer,c=this.paths.length,l=0;for(o=0;c>o;o++)i=this.paths[o],i.isActive&&l++,i.id===a.id&&(h=o,n=i);e.cancelled?n&&(this.paths.splice(h,1),l-=n.isActive?1:0):(n?(n.movePointer=a,n.moveTime=(new Date).getTime()):(n=new s(a),this.paths.push(n),l++),"pointerend"===e.type&&n.isActive&&(l--,n.isActive=!1)),r=0>=l?"gestureend":0===c?"gesturestart":"gesturemove",this.$el.trigger(new t.Event(r,{paths:this.paths,cancelled:0===this.paths.length,originalEvent:e.originalEvent})),0>=l&&(this.paths=[])}function s(t){this.id=t.id,this.startPointer=t,this.startTime=(new Date).getTime(),this.movePointer=t,this.moveTime=this.startTime,this.isActive=!0}e.prototype.start=function(){this.$el.on(this.listeners)},e.prototype.stop=function(){this.$el.off(this.listeners),this.paths=[]},s.prototype.getLength=function(){return Math.abs(this.movePointer.getDistance(this.startPointer))},s.prototype.getElapsed=function(){return this.moveTime-this.startTime},s.prototype.getAngle=function(){var t=Math.atan2(this.movePointer.y-this.startPointer.y,this.startPointer.x-this.movePointer.x);return 180*(t/Math.PI)+180},s.prototype.getDirection=function(){var t=this.getAngle();return t>=45&&135>t?"up":t>=135&&225>t?"left":t>=225&&315>t?"down":"right"},s.prototype.angleBetween=function(t){var e=Math.abs(this.getAngle()-t.getAngle());return e=Math.min(e,360-e)},PxTouch.registerSpecialEvents("pxtouch.gestures",["gesturestart","gesturemove","gestureend"],e)}(PxTouch.jQuery||jQuery),function(t){function e(e){this.$el=e,this.activeEventTypes=0,this.state=o.NONE,this.holdTimer=null;var s=t.proxy(i,this);this.listeners={gesturestart:s,gesturemove:s,gestureend:s}}function i(t){var e,i,h=t.paths,a=this.state,c="gestureend"===t.type,l=!1;t.originalEvent.which?l=3===t.originalEvent.which:t.originalEvent.button&&(l=2===t.originalEvent.button),a===o.INVALID||1!==h.length||l||t.cancelled?e=o.INVALID:(i=h[0].getLength(),e=i>n?o.INVALID:a===o.HOLD?o.HOLD:o.TAP),this.holdTimer||e!==o.TAP?this.holdTimer&&(e===o.INVALID||c)&&(clearTimeout(this.holdTimer),this.holdTimer=null):this.holdTimer=setTimeout(s(t,this),r),e===o.HOLD&&c||a===o.HOLD&&e!==a?this.triggerEvent("holdend",t,e===o.INVALID):c&&e===o.TAP&&this.triggerEvent("tap",t),this.state=c?o.NONE:e}function s(e,i){return t.proxy(function(){this.state=o.HOLD,this.triggerEvent("holdstart",e),this.holdTimer=null},i)}var n=10,r=500,o={NONE:0,INVALID:1,TAP:2,HOLD:3};e.prototype.start=function(){this.$el.on(this.listeners)},e.prototype.stop=function(){this.$el.off(this.listeners),this.state=o.NONE},e.prototype.triggerEvent=function(e,i,s){var n=i.paths.length>0?i.paths[0].movePointer:null;this.$el.trigger(new t.Event(e,{x:n?n.x:0,y:n?n.y:0,pointerType:n?n.type:null,cancelled:s===!0,originalEvent:i.originalEvent}))},PxTouch.registerSpecialEvents("pxtouch.taps",["tap","holdstart","holdend"],e)}(PxTouch.jQuery||jQuery),function(t){function e(e){this.$el=e,this.state=o.NONE;var s=t.proxy(i,this);this.listeners={gesturestart:s,gesturemove:s,gestureend:s}}function i(e){var i,h,a,c,l,u,g=e.paths,p=this.state,v="gestureend"===e.type;if(p!==o.INVALID){if(g.length>2||e.cancelled)this.state=o.INVALID;else if(2===g.length&&(i=g[0],h=g[1],a=i.getLength(),c=h.getLength(),(a>s||c>s)&&(this.state=a>n&&c>n?i.angleBetween(h)>=r?o.PINCH:o.INVALID:o.PINCH),this.state===o.PINCH)){l=i.movePointer.getDistance(h.movePointer),u=i.startPointer.getDistance(h.startPointer);var d={originX:(i.movePointer.x+h.movePointer.x)/2,originY:(i.movePointer.y+h.movePointer.y)/2,scale:l/u,paths:g,cancelled:!1,originalEvent:e.originalEvent};p===o.NONE?this.$el.trigger(t.Event("pinchstart",d)):v||this.$el.trigger(t.Event("pinchmove",d)),v&&this.$el.trigger(t.Event("pinchend",d))}this.state===o.INVALID&&p===o.PINCH&&this.$el.trigger(t.Event("pinchend",{originX:0,originY:0,scale:0,paths:[],cancelled:!0,originalEvent:e.originalEvent}))}v&&(this.state=o.NONE)}var s=10,n=15,r=30,o={NONE:0,PINCH:1,INVALID:2};e.prototype.start=function(){this.$el.on(this.listeners)},e.prototype.stop=function(){this.$el.off(this.listeners),this.state=o.NONE},PxTouch.registerSpecialEvents("pxtouch.pinch",["pinchstart","pinchmove","pinchend"],e)}(PxTouch.jQuery||jQuery),function(t){function e(e){this.$el=e,this.state=o.NONE;var i=t.proxy(s,this);this.listeners={gesturestart:i,gesturemove:i,gestureend:i}}function i(t){var e,i,s,n,o,h=t.length;if(h>1)for(e=0;h>e;e++)if(s=t[e],s.isActive){for(n=!1,i=0;h>i;i++)if(e!==i&&(o=s.movePointer.getDistance(t[i].movePointer),r>=o)){n=!0;break}if(!n)return!1}return!0}function s(e){var s,r=e.paths,h=this.state,a="gestureend"===e.type;if(h!==o.INVALID){s=r.length>0?r[0].getLength():0;var c={paths:r,length:s,cancelled:e.cancelled,originalEvent:e.originalEvent};e.cancelled||!i(e.paths)?(this.state=o.INVALID,c.cancelled=!0):this.state===o.NONE?s>n&&(this.state=o.DRAG,this.$el.trigger(t.Event("dragstart",c))):a||this.$el.trigger(t.Event("dragmove",c)),(h===o.DRAG&&this.state===o.INVALID||this.state===o.DRAG&&a)&&this.$el.trigger(t.Event("dragend",c))}a&&(this.state=o.NONE)}var n=10,r=200,o={NONE:0,DRAG:1,INVALID:2};e.prototype.start=function(){this.$el.on(this.listeners)},e.prototype.stop=function(){this.$el.off(this.listeners),this.state=o.NONE},PxTouch.registerSpecialEvents("pxtouch.drag",["dragstart","dragmove","dragend"],e)}(PxTouch.jQuery||jQuery),function(t){function e(e){this.$el=e,this.state=r.NONE,this.maxLength=0,this.angle=0;var s=t.proxy(i,this);this.listeners={dragstart:s,dragmove:s,dragend:s}}function i(e){var i,o,h=e.paths,a=this.state,c="dragend"===e.type,l=e.length;if(this.state!==r.INVALID){i=h.length>0?h[0].getAngle():0;var u={length:l,angle:i,paths:h,cancelled:e.cancelled,originalEvent:e.originalEvent};e.cancelled?this.state=r.INVALID:this.state===r.NONE?(this.state=r.SWIPE,this.maxLength=l,this.angle=i,this.$el.trigger(t.Event("swipestart",u))):(l>=this.maxLength?this.maxLength=l:this.maxLength-l>s&&(this.state=r.INVALID),o=Math.abs(this.angle-i),Math.min(o,360-o)>n&&(this.state=r.INVALID),this.state===r.INVALID||c||this.$el.trigger(t.Event("swipemove",u))),(a===r.SWIPE&&this.state===r.INVALID||this.state===r.SWIPE&&c)&&(u.cancelled=this.state===r.INVALID,this.$el.trigger(t.Event("swipeend",u)))}c&&(this.state=r.NONE,this.maxLength=0,this.angle=0)}var s=20,n=20,r={NONE:0,SWIPE:1,INVALID:2};e.prototype.start=function(){this.$el.on(this.listeners)},e.prototype.stop=function(){this.$el.off(this.listeners),this.state=r.NONE,this.maxLength=0,this.angle=0},PxTouch.registerSpecialEvents("pxtouch.swipe",["swipestart","swipemove","swipeend"],e)}(PxTouch.jQuery||jQuery);